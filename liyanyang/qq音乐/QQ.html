<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="./qq.css" />
    <script src="./jquery-3.7.0.min.js"></script>
  </head>
  <body>
    <div id="box">
      <div id="top">
        <button id="sc">收藏</button>
        <button id="tianjia">添加到</button>
        <button id="xz">下载</button>
        <button id="shanc">删除</button>
        <button id="qk">清空列表</button>
      </div>
      <div id="test">
        <div id="test1">
          <ul class="ul1">
            <li>
              <input type="checkbox" name="" class="che" />&emsp;&emsp;<span
                class="sp"
                >歌曲</span
              >
              <span class="sp1">歌手</span><span class="sp2">时长</span>
            </li>
            <br />
            <li>
              <input type="checkbox" name="" class="che" />&emsp;&emsp;<span
                id="cgw"
                class="sp"
                >1 孤独面店</span
              >
              <span class="sp7">
                &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;姜云升</span
              ><span class="sp4">04:07</span>
            </li>
            <br />
            <li>
              <input type="checkbox" name="" class="che" />&emsp;&emsp;<span
                id="rod"
                class="sp"
                >2 Rodeo</span
              ><span class="sp5">sakura</span><span class="sp6">04:56</span>
            </li>
            <br />
            <li>
              <input type="checkbox" name="" class="che" />&emsp;&emsp;<span
                class="sp"
                >3 学不会</span
              ><span class="sp5"> 江隐七</span><span class="sp6">05:18</span>
            </li>
            <br />
            <li>
              <input type="checkbox" name="" class="che" />&emsp;&emsp;<span
                class="sp"
                >4 我看过</span
              ><span class="sp5">DDCRa</span><span class="sp6">01:16</span>
            </li>
            <br />
            <li>
              <input type="checkbox" name="" class="che" />&emsp;&emsp;<span
                class="sp"
                >5 梦醒</span
              ><span class="sp5"> &emsp; Anuo.</span
              ><span class="sp6">05:18</span>
            </li>
            <br />
            <li>
              <input type="checkbox" name="" class="che" />&emsp;&emsp;<span
                class="sp"
                id="pp"
                >6 The Way I Still Love You（慢速）</span
              >
              <span class="sp3">蓓蓓</span><span class="sp4">04:07</span>
            </li>
            <br />
            <li>
              <input type="checkbox" name="" class="che" />&emsp;&emsp;<span
                class="sp"
                >7 Shelter</span
              ><span class="sp5">sakura</span><span class="sp6">03:25</span>
            </li>
            <br />
            <li>
              <input type="checkbox" name="" class="che" />&emsp;&emsp;<span
                class="sp"
                >8 Sent it</span
              ><span class="sp5"> sakura</span><span class="sp6">03:46</span>
            </li>
          </ul>
        </div>
        <div id="bf">
          <div class="bfq">
            <img
              src="https://y.qq.com/music/photo_new/T002R300x300M000000wnSAn3m5Xbc_2.jpg?max_age=2592000"
              class="ims"
              alt=""
            />
            <div id="lyric"></div>
          </div>
        </div>
      </div>
      <div id="bottom">
        <br /><br />
        <svg
          t="1684241328724"
          id="prev"
          class="icon"
          viewBox="0 0 1024 1024"
          version="1.1"
          xmlns="http://www.w3.org/2000/svg"
          p-id="6995"
          width="32"
          height="32"
        >
          <path
            d="M658.29178 1003.504117l223.006914 0L398.119373 520.342595 881.298746 0 658.291782 0 175.112507 520.342595 658.29178 1003.504117z"
            p-id="6996"
            fill="#cdcdcd"
          ></path>
        </svg>
        <svg
          t="1684241256965"
          id="bofang"
          class="icon"
          viewBox="0 0 1024 1024"
          version="1.1"
          xmlns="http://www.w3.org/2000/svg"
          p-id="2471"
          width="32"
          height="32"
        >
          <path
            d="M512 0C230.4 0 0 230.4 0 512s230.4 512 512 512 512-230.4 512-512S793.6 0 512 0z m0 981.333333C253.866667 981.333333 42.666667 770.133333 42.666667 512S253.866667 42.666667 512 42.666667s469.333333 211.2 469.333333 469.333333-211.2 469.333333-469.333333 469.333333z"
            fill="#666666"
            p-id="2472"
          ></path>
          <path
            d="M672 441.6l-170.666667-113.066667c-57.6-38.4-106.666667-12.8-106.666666 57.6v256c0 70.4 46.933333 96 106.666666 57.6l170.666667-113.066666c57.6-42.666667 57.6-106.666667 0-145.066667z"
            fill="#666666"
            p-id="2473"
          ></path>
        </svg>
        <svg
          t="1684241354098"
          id="next"
          class="icon"
          viewBox="0 0 1024 1024"
          version="1.1"
          xmlns="http://www.w3.org/2000/svg"
          p-id="7486"
          width="32"
          height="32"
        >
          <path
            d="M881.298746 520.342595 398.119373 0 175.112486 0 658.29178 520.342595 175.112507 1003.504117l223.006914 0L881.298746 520.342595z"
            p-id="7487"
            fill="#cdcdcd"
          ></path>
        </svg>
        <audio controls class="ad" preload="metadata" id="player">
          <source src="./孤独面店 - 姜云升.mp3" />
        </audio>
        <audio controls class="dd">
          <source src="./蓓蓓,误区 - The Way I Still Love You（慢速）.mp3" />
        </audio>
        <audio controls class="ro">
          <source src="./sakura - Rodeo（0.7）.mp3" />
        </audio>
        <audio controls class="ro">
          <source src="./Anuo. - 梦醒（x0.75）.mp3" />
        </audio>
        <audio controls class="ro">
          <source src="./DDCRA - 我看过.mp3" />
        </audio>
        <audio controls class="ro">
          <source src="./江隐七 - 学不会 (热门原声).mp3" />
        </audio>
      </div>
    </div>
    <script>
      $(document).ready(function () {
        var songs = [
          "./孤独面店 - 姜云升.mp3",
          "./sakura - Rodeo（0.7）.mp3",
          "./江隐七 - 学不会 (热门原声).mp3",
          "./DDCRA - 我看过.mp3",
          "./Anuo. - 梦醒（x0.75）.mp3",
          "./蓓蓓,误区 - The Way I Still Love You（慢速）.mp3",
        ]; // 歌曲列表
        var currentSong = 0; // 当前播放的歌曲索引
        var player = $("#player")[0]; // 获取音乐播放器元素
        // 播放/暂停按钮点击事件
        $("#bofang").on("click", function () {
          if (player.paused) {
            player.play();
          } else {
            player.pause();
          }
        });
        // 上一首按钮点击事件
        $("#prev").on("click", function () {
          currentSong--;
          if (currentSong < 0) {
            currentSong = songs.length - 1;
          }

          player.src = songs[currentSong];
          player.play();
        });

        // 下一首按钮点击事件
        $("#next").on("click", function () {
          currentSong++;
          if (currentSong > songs.length - 1) {
            currentSong = 0;
          }
          player.src = songs[currentSong];
          player.play();
        });
      });
      let lrc = [];
      const pattern = /\[(.+)\](.+)/;
      $(function () {
        $.get("./孤独面店 - 姜云升.lrc", function (data) {
          lrc = data.split("\n");
          console.log(lrc);
          lrc = lrc.map((currentItem) => {
            let tmp = currentItem.match(pattern);
            console.log(currentItem);

            if (tmp) {
              return {
                time: s(tmp[1]),
                lyric: tmp[2],
              };
            } else {
              return null;
            }
            console.log(tmp);
          }); //渲染歌词
          renderLyric();
        });
      });
      function renderLyric() {
        let html1 = "";
        lrc.forEach((currentItem) => {
          html1 += `<p>${currentItem.lyric}</p >`;
        });
        $("#lyric").html(html1);
      }
      $("#player").on("play", function () {
        setInterval(() => {
          ctime = Math.floor(this.currentTime);
          lrc.forEach((currentItem, index) => {
            if (ctime >= currentItem.time && ctime < lrc[index + 1].time) {
              $("p").eq(index).css("color", "yellowgreen");
            }
          });
        }, 500);
      });

      function s(timeString) {
        const [minutes, seconds] = timeString.split(":");
        return parseInt(minutes) * 60 + parseInt(seconds);
      }
    </script>

  </body>
</html>
